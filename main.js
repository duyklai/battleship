!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/battleship/",n(n.s=4)}([function(e,t,n){const r=n(1);e.exports=()=>{const e=[...Array(10)].map(e=>Array(10)),t=[...Array(10)].map(e=>Array(10)),n={Carrier:5,Battleship:4,Destroyer:3,Submarine:3,Patrol:2};let o,a=[],l=0,c=0;const i=(e,t,n,r)=>{if("horizontal"==r){if(t+n>10)return!0}else if("vertical"==r&&e+n>10)return!0;return!1};return{placeShip:(t,a,c,d)=>{if(i(t,a,n[c],d))return;let s=0;for(;s<n[c];){if("horizontal"==d){if(null!=e[t][a+s])return}else if("vertical"==d&&null!=e[t+s][a])return;s++}for(let e in n)e==c&&("horizontal"==d?o=r(c,n[c],{x_coor:t,y_coor:a},{x_coor:t,y_coor:a+n[c]-1}):"vertical"==d&&(o=r(c,n[c],{x_coor:t,y_coor:a},{x_coor:t+n[c]-1,y_coor:a})));for(s=0;s<o.getLength();)"horizontal"==d?(e[t][a+s]=o,s++):"vertical"==d&&(e[t+s][a]=o,s++);return l++,e},checkAttack:(e,n)=>"x"==t[e][n]||null!=t[e][n]&&void 0,receiveAttack:(n,r)=>"object"==typeof e[n][r]?(e[n][r].hit(n,r),e[n][r].isSunk()&&(a.push(e[n][r]),c++),t[n][r]="x",!0):null==t[n][r]?(t[n][r]="x",!1):void 0,getSunkShips:()=>a,sunkenAll:()=>c===l}}},function(e,t){e.exports=(e,t,n,r)=>{const o=e,a=t;let l=!1,c=[];if(n.y_coor==r.y_coor)for(let e=n.x_coor;e<=r.x_coor;e++)c.push({x:e,y:n.y_coor,hit:!1});else for(let e=n.y_coor;e<=r.y_coor;e++)c.push({x:n.x_coor,y:e,hit:!1});return{getLength:()=>a,getName:()=>o,hit:(e,t)=>{let n=c.indexOf(c.find(n=>n.x==e&&n.y==t));return c[n].hit=!0,c},isSunk:()=>(c.every(e=>1==e.hit)&&(l=!0),l)}}},function(e,t){e.exports=(e,t,n)=>{const r=t,o=n,a=()=>{for(xPlay=Math.floor(10*Math.random()),yPlay=Math.floor(10*Math.random());r.checkAttack(xPlay,yPlay);)xPlay=Math.floor(10*Math.random()),yPlay=Math.floor(10*Math.random());return[xPlay,yPlay]};return{computerPlay:()=>{let e=0;[x_coor,y_coor]=a();let t=r.receiveAttack(x_coor,y_coor);if(o.childNodes.forEach(n=>{n.dataset.coordinateX==x_coor&&n.dataset.coordinateY==y_coor&&(o.childNodes[e].style.backgroundColor=t?"red":"white"),e++}),r.sunkenAll()){let e=document.querySelector(".ship-div");for(e.firstChild.innerHTML="All of your ships has been sunk. You lost!";e.childNodes.length>1;)e.removeChild(e.lastChild);const t=document.createElement("button");return t.className="restart-game",t.innerHTML="Restart Game",t.onclick=function(){document.location.reload()},e.appendChild(t),!1}return!0}}}},function(e,t){e.exports=()=>{let e=null,t=null,n=!1,r=!1,o="horizontal",a=null,l=0;const c=e=>{let t,n,r=e.length;for(;r;)n=Math.floor(Math.random()*r--),t=e[r],e[r]=e[n],e[n]=t;return e},i=()=>(function(){r=!0;let e=document.querySelector(".ship-div");e.removeChild(e.lastChild),e.firstChild.innerHTML="Ships you have destroyed:";const t=document.createElement("button");t.className="mini-restart-game",t.innerHTML="Restart Game",t.onclick=s(),e.appendChild(t)}),d=e=>{let t=document.querySelector(".ship-div"),n=e.getSunkShips();for(;t.childNodes.length>1;)t.removeChild(t.lastChild);for(let e=0;e<n.length;e++){let r=document.createElement("p");r.className=n[e].getName(),r.innerHTML=n[e].getName().strike(),t.appendChild(r)}},s=()=>(function(){document.location.reload()}),u=()=>{o="horizontal"==o?"vertical":"horizontal"};return{setPlayerOne:t=>{e=t},setPlayerTwo:e=>{t=e},selectShip:(e,t)=>(function(){n=!0,a=e,l=t}),changeDirection:()=>(function(){o="horizontal"==o?"vertical":"horizontal"}),changeSelectShip:()=>(function(e){let t=document.querySelector(".selected-ship");t&&t.classList.remove("selected-ship"),e.target.classList.add("selected-ship")}),compRandomPlace:e=>{let t,n=0,r=!1,a=c(["Carrier","Battleship","Destroyer","Submarine","Patrol"]);for(;!r;)Math.floor(10*Math.random())%2==0&&u(),xPlace=Math.floor(10*Math.random()),yPlace=Math.floor(10*Math.random()),(t=e.placeShip(xPlace,yPlace,a[n],o))&&5==++n&&(o="horizontal",r=!0)},clickToPlace:e=>(function(t){const r=e;if(n){let e=parseInt(t.target.dataset.coordinateX,10),c=parseInt(t.target.dataset.coordinateY,10),d=r.placeShip(e,c,a,o);if("vertical"==o){for(let t=e;t<e+l;t++)if("object"==typeof d[t][c]){document.querySelector(`[data-coordinate-x='${t}'][data-coordinate-y='${c}']`).classList.add("selected")}}else if("horizontal"==o)for(let t=c;t<c+l;t++)if("object"==typeof d[e][t]){document.querySelector(`[data-coordinate-x='${e}'][data-coordinate-y='${t}']`).classList.add("selected")}let s=document.querySelector(`.${a}`);s.parentNode.removeChild(s);let u=document.querySelector(".ship-rotate");if(2==u.parentNode.childNodes.length){const e=document.createElement("button");e.className="start-game",e.innerHTML="Start Game",u.parentNode.firstChild.innerHTML="You have placed all the ships. Start the game!",e.addEventListener("click",i()),u.parentNode.appendChild(e),u.parentNode.removeChild(u)}n=!1,a=null,l=0}}),clickToAttack:e=>(function(n){if(r){const o=e;let a=null,l=parseInt(n.target.dataset.coordinateX,10),c=parseInt(n.target.dataset.coordinateY,10);if(o.checkAttack(l,c)||(a=o.receiveAttack(l,c)),a?(n.target.style.backgroundColor="red",r=t.computerPlay()):0==a&&(n.target.style.backgroundColor="white",r=t.computerPlay()),o.sunkenAll()){r=!1;let e=document.querySelector(".ship-div");e.style.height="380px",e.firstChild.innerHTML="You have sunk all of the enemies ship. You won!",d(o);const t=document.createElement("button");t.className="restart-game",t.innerHTML="Restart Game",t.onclick=s(),e.appendChild(t)}}}),updateSunkShips:e=>(function(){let t=document.querySelector(".ship-div");if(r){for(sunkShips=e.getSunkShips();t.childNodes.length>1;)t.removeChild(t.lastChild);for(let e=0;e<sunkShips.length;e++){let n=document.createElement("p");n.className=sunkShips[e].getName(),n.innerHTML=sunkShips[e].getName(),t.appendChild(n)}const n=document.createElement("button");n.className="mini-restart-game",n.innerHTML="Restart Game",n.onclick=s(),t.appendChild(n)}}),placementMouseOver:()=>(function(e){var t=e.target;if(n){let e=parseInt(t.dataset.coordinateX,10),n=parseInt(t.dataset.coordinateY,10);if("horizontal"==o){if(n+l<=10)for(let t=n;t<n+l;t++){document.querySelector(`[data-coordinate-x='${e}'][data-coordinate-y='${t}']`).classList.add("phantom")}}else if("vertical"==o&&e+l<=10)for(let t=e;t<e+l;t++){document.querySelector(`[data-coordinate-x='${t}'][data-coordinate-y='${n}']`).classList.add("phantom")}}}),placementMouseOut:()=>(function(){if(n){document.querySelectorAll(".phantom").forEach(e=>{e.classList.remove("phantom")})}})}}},function(e,t,n){"use strict";n.r(t);const r=n(0),o=n(2);let a=n(3)();({initialSetup:function(){const e=document.querySelector("body"),t=document.createElement("header");t.innerHTML="Battleship";const n=function(){const e=document.createElement("div");e.className="instruction-div";let t=document.createElement("h2");t.className="instruction-title",t.innerHTML="How to play:",e.appendChild(t);let n=document.createElement("ul"),r=document.createElement("li");return r.innerHTML="Select a ship on the left",n.appendChild(r),(r=document.createElement("li")).innerHTML="Place it on your board without going outside of board OR overlapping with other ships",n.appendChild(r),(r=document.createElement("li")).innerHTML='Click "Start Game" when ready',n.appendChild(r),(r=document.createElement("li")).innerHTML="Take guess at squares of the enemy's board to destroy all five enemy ships",n.appendChild(r),(r=document.createElement("li")).innerHTML="First player to destroy all 5 of the enemy's ship",e.appendChild(n),e}(),l=document.createElement("div");l.className="content-div";let c=function(){let e=[["Carrier",5],["Battleship",4],["Destroyer",3],["Submarine",3],["Patrol",2]];const t=document.createElement("div");t.className="ship-div";let n=document.createElement("h2");n.innerHTML="Place your ships:",t.appendChild(n);for(let n=0;n<e.length;n++){let r=document.createElement("p");r.className=e[n][0],r.innerHTML=e[n][0],r.addEventListener("click",a.selectShip(e[n][0],e[n][1])),r.addEventListener("click",a.changeSelectShip(),!1),t.appendChild(r)}const r=document.createElement("button");return r.className="ship-rotate",r.innerHTML="Rotate",r.addEventListener("click",a.changeDirection()),t.appendChild(r),t}(),[i,d,s]=function(){const e=document.createElement("div");e.className="player-div";const t=document.createElement("h2");t.className="fleet",t.innerHTML="Your Fleet",e.appendChild(t);const n=document.createElement("div");n.className="player-grid";let o=r();n.style.gridTemplateRows="1fr ".repeat(10),n.style.gridTemplateColumns="1fr ".repeat(10);for(let e=0;e<10;e++)for(let t=0;t<10;t++){let r=document.createElement("div");r.classList.add("square"),r.dataset.coordinateX=e,r.dataset.coordinateY=t,r.addEventListener("mouseenter",a.placementMouseOver(),!1),r.addEventListener("mouseleave",a.placementMouseOut()),r.addEventListener("click",a.clickToPlace(o),!1),n.appendChild(r)}return e.appendChild(n),[e,n,o]}(),[u,p,h]=function(){const e=document.createElement("div");e.className="comp-div";const t=document.createElement("h2");t.className="fleet",t.innerHTML="Enemy Fleet",e.appendChild(t);const n=document.createElement("div");n.className="comp-grid";let o=r();a.compRandomPlace(o),n.style.gridTemplateRows="1fr ".repeat(10),n.style.gridTemplateColumns="1fr ".repeat(10);for(let e=0;e<10;e++)for(let t=0;t<10;t++){let r=document.createElement("div");r.classList.add("square"),r.dataset.coordinateX=e,r.dataset.coordinateY=t,r.addEventListener("click",a.clickToAttack(o),!1),r.addEventListener("click",a.updateSunkShips(o)),n.appendChild(r)}return e.appendChild(n),[e,n,o]}();l.appendChild(c),l.appendChild(i),l.appendChild(u),e.prepend(l),e.prepend(n),e.prepend(t),a.setPlayerOne(o("player",h,p)),a.setPlayerTwo(o("computer",s,d))}}).initialSetup()}]);